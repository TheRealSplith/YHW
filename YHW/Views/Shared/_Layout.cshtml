<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">
  <title>@ViewBag.Title</title>

  <link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
  @Styles.Render("~/Content/bootstrap-social.css")
  @Styles.Render("~/Content/font-awesome.min.css")
  @Styles.Render("~/Content/Site.css")

  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <script src="../../assets/js/html5shiv.js"></script>
    <script src="../../assets/js/respond.min.js"></script>
  <![endif]-->
  <style type="text/css"></style>
</head>

<body>
  <nav class="row navbar navbar-green navbar-fixed-top" role="navigation">
    <div class="content">
      <div class="col-xs-2">
        <div class="navbar-inner">
          <a class="brand" href="@Url.Action("Index", "Home")"><img src="@Url.Content("~/Content/images/yhw_resize.png")" /></a>
        </div>
      </div>
      <div class="col-xs-10">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#header-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div class="collapse navbar-collapse" id="header-collapse">
          <ul class="nav navbar-nav navbar-left">
            <li>@Html.ActionLink("Home", "Index", "Home")</li>
            <li>@Html.ActionLink("About", "About", "Home")</li>
            <li>@Html.ActionLink("Topics", "Index", "Topic")</li>
            <li><a href="#">Events  </a></li>
            <li>@Html.ActionLink("Contact Us", "Index", "Contact")</li>
            <li><a href="#">Support  </a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            @if (Request.IsAuthenticated)
            {
              using (var context = new YHW.Models.SocialContext())
              {
                var profile = context.UserProfile.Where(p => p.UserName == User.Identity.Name).FirstOrDefault();
                if (profile != null)
                {
                  <li><a href="#">Hello, @Html.Encode(profile.FirstName)</a></li>
                }
              }
              <li><a id="logoff" href="#" >Log Off</a></li>
            }
            else
            {
              <li>@Html.ActionLink("Log In", "Login", "Account")</li>
            }
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
  </nav>
  <div class="container">
    <div class="row">
      <div class="col-xs-12 col-md-8">
        @RenderBody()
      </div>
      <div class="col-md-4 col-xs-6">
        <a class="twitter-timeline" href="https://twitter.com/youheardwrong" data-widget-id="440022171801231360">Tweets by @@youheardwrong</a>
      </div>
    </div>
  </div>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  @Scripts.Render("~/bundles/jquery")
  @Scripts.Render("~/Scripts/bootstrap.min.js")
  @Scripts.Render("~/Scripts/knockout-3.1.0.js")
  @Scripts.Render("~/Scripts/knockout.validation.js")
  <script>!function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https'; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = p + "://platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs); } }(document, "script", "twitter-wjs");</script>
  @if (Request.IsAuthenticated)
  {
    <script type="text/javascript">
      window.onload = function() {
        var logoff = document.getElementById("logoff")
        logoff.onclick = function () {
          $.post("@Url.Action("LogOff", "Account")", null, function (result) {
            if (result.Success) {
              window.location.href = result.Redirect;
            }
          });
        }
      }
    </script>
  }
  @RenderSection("scripts", required: false)
</body>
</html>